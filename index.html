<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Beyou Flash Utility</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>
      // Redirect to HTTPS if HTTP is requested.
      if (
        window.location.hostname !== "localhost" &&
        window.location.protocol === "http:"
      ) {
        window.location.href = "https:" + window.location.href.substring(5);
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.js"></script>
    <link rel="stylesheet" href="https://use.typekit.net/qtk5kiq.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/light.css" id="light" class="alternate" disabled />
    <link rel="stylesheet" href="css/dark.css" id="dark" class="alternate" disabled />
  </head>
  <body>
    <header class="header">
      <div class="left">
        <img src="assets/adafruit-logo.svg" class="Adafruit-Logo">
      </div>
      <div class="right">
        <select id="baudRate"></select>
        <button id="butConnect" type="button">Connect</button>
      </div>
    </header>
    
    <main class="main">
      <div id="notSupported" class="notSupported" style="display: none;">
        Sorry, <b>Web Serial</b> is not supported on this device, make sure
        you're running Chrome 89 or later.
      </div>
      
      <div class="subheader">
        <div class="title left">SFA Flash</div>
        <div class="right">
        </div>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="firmware-selector">
          <h2>Sélectionner un firmware</h2>
          <select id="firmware-picker">
          <option value="mon-firmware-custom" selected>SFA Production</option>
          </select>
          <div id="firmware-info" style="margin-top: 20px; display: none;">
            <p id="firmware-description"></p>
          </div>
        </div>

        <div class="program-section">
          <button id="programButton" type="button" disabled>Programmer</button>
          <button id="eraseButton" type="button" disabled>Effacer</button>
        </div>

        <div class="console-output">
          <h3>Console</h3>
          <div id="console" class="console"></div>
        </div>
      </div>
    </main>

    <footer class="footer">
      <p>© 2026</p>
    </footer>

    <script>
      window.firmwareManifests = {
        "mon-firmware-custom": {
          name: "Firmware info",
          version: "1.9.0",
          home_assistant_domain: null,
          new_install_prompt_erase: true,
          builds: [
            {
              chipFamily: "ESP32",
              improv: false,
              parts: [
                { path: "firmwares/bootloader.bin", offset: 0x1000 },
                { path: "firmwares/partitions.bin", offset: 0x8000 },
                { path: "firmwares/firmware.bin", offset: 0x10000 }
              ]
            }
          ]
        }
      };
    </script>

    <script src="js/script.js"></script>
  </body>
</html>

